# JPA 는 무엇을 해결하기 위해 등장했는가 ?

## 기존 sql mapping 문제

** 반복적인 작업이 많다.
#. 회원이라는 객체를 만든다고 가정을 했다.
Member 객체에 전화번호 추가하고 , memberDAO 메서드의 파라미터 수정하고 ,쿼리 수정하고

위 과정을 계속해서 해줘야하는거지

그런데 이렇게 수정하면 1~3번까지 전부 다 들어가서 확인을 해야하는거지.

그리고 하나를 수정해서 되는 것이 아니라. 하나를 수정해서 정상적으로 동작이 가능할 수도 있고, 안될 수도 있다. 그리고 이러한 에러는 런타임 때 발견될 수 있는 부분이라는 것이다. (굉장히 위험함)
ex) **사용되는 객체는 수정했지만 DAO 부분을 수정하지 않아서 값이 안나온다, DAO를 수정 했지만 쿼리를 수정하지 않아서 null 값만 나온다 ... 등등등....**

결과적으로 책에서는 이러한 개발과정에서 문제를 3가지로 정리했다.

* 진정한 의미의 계층 분할이 어렵다.
* 엔티티를 신뢰할 수 없다.
* SQL에 의존적인 개발을 피하기 어렵다.
  -> 일단 SQL에 의존적이고 , 객체를 변경한다고 한들 sql을 계속해서 신경을 써야하는데 .. 개발과 , 데이터 계층을 분리한 것 처럼 보이기만 하는 것이다. 보이지 않을 뿐 굉장한 연관도를 갖고 있는 것이다.

## JPA는 이를 어떻게 해결할까 ?
> 책 문장을 인용 -> "JPA를 사용하면 객체를 데이터베이스에 저장하고 관리할 때 개발자가 직접 SQL을 작성하는 것이 아니라 JPA가 제공하는 API를 사용하면 된다.

나는 인프런에서 이미 애플리케이션을 개발하는 과정을 수강한 후 이 책을 보고 있다. 때문에 이게 어떻게 해결될지 대충 예상이 된다.

1. 저장
   EntityManager em;
   em.persist(vo);

(**이런식으로 데이터를 저장한다. 데이터는 타입을 통해서 테이블과 JPA가 매핑을 시켜주는 것으로 예상된다. 이것도 추후 책에서 나오지 않을까 예상한다.**)

2. 조회
   String memberId = "memberId";
   em.find(Member.class, memberId);

3. 수정
4. Member member = em.find(Member.class, memberid);
   member.set~~(parameter);

5. 연관된 객체 조회
   Member member = em.find(Member.class, memberId);
   Team team = member.getTeam();

그리고 영속성, 비영속성, 등 이러한 설명이 추후에 등장할 것으로 예상이 된다. 해당 개념은 굉장히 중요한 개념이니 참고하도록 합시다.

### 단어 설명
1. 엔티티(entity) : Member , Team 처럼 비즈니스 요구사항을 모델링한 객체.

